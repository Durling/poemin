<!DOCTYPE>
<html>
<head>
<style>
button {
    font-size: 50px;
}
</style>

</head>
<body>
	<div>
		<button class="startRecord" onclick="startRecord()">开始录音</button>
	</div>
	<div>
		<button class="stopRecord" onclick="stopRecord()">结束录音</button>
	</div>
	<div>
		<button class="playVoice" onclick="playVoice()">播放录音</button>
	</div>

<!-- 微信JS-SDK说明文档 -->
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script>

var wxConfig = <%-JSON.stringify(wxConfig)%>
console.log(wxConfig)

wx.config({
    debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
    appId: wxConfig.appid, // 必填，企业号的唯一标识，此处填写企业号corpid
    timestamp: wxConfig.timestamp, // 必填，生成签名的时间戳
    nonceStr: wxConfig.noncestr, // 必填，生成签名的随机串
    signature: wxConfig.signature,// 必填，签名，见附录1
    jsApiList: ['startRecord','stopRecord','onVoiceRecordEnd','playVoice'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
});

var localId = ''

function startRecord () {
	// console.log('wx.startRecord')
	wx.startRecord();
}

function stopRecord () {
	// console.log('wx.stopRecord')

	wx.stopRecord({
	    success: function (res) {
	        localId = res.localId;
	        console.log('localId=>',localId)
	    }
	});
}

function playVoice () {
	// console.log('wx.playVoice')

	wx.playVoice({
	    localId: localId // 需要播放的音频的本地ID，由stopRecord接口获得
	});
}

	
</script>
</body>
</html>
